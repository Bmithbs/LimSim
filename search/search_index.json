{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Long-term Macro-micro Interactive Simulation","text":"<p>Welcome to LimSim.</p>"},{"location":"AnalysisAndEvaluation/Database/","title":"Database","text":"<p>markdown LimSim stores all data in the database during simulation to facilitate analysis and evaluation of simulation. LimSim uses a lightweight open-source database SQLite for data storage, which makes it easy to view and migrate data. The storage of simulation data in LimSim is mainly divided into three parts: road network data, vehicle data, and simulation data, which are introduced below.</p>"},{"location":"AnalysisAndEvaluation/Database/#road-network-data","title":"Road Network Data","text":"<p>Based on the SUMO road network, LimSim models multiple types of road network structures. The following tables record road network data. When replaying data, the road network is reconstructed based on the following data.</p>"},{"location":"AnalysisAndEvaluation/Database/#edgeinfo","title":"edgeINFO","text":"Field Data Type Description <code>id</code> TEXT PRIMARY KEY ID of edge <code>laneNumber</code> INT Number of lanes on edge <code>from_junction</code> TEXT ID of starting junction of edge <code>to_junction</code> TEXT ID of ending junction of edge"},{"location":"AnalysisAndEvaluation/Database/#laneinfo","title":"laneINFO","text":"Field Data Type Description <code>id</code> TEXT PRIMARY KEY ID of lane <code>rawShape</code> TEXT Geometric structure of lane centerline <code>width</code> REAL Width of lane <code>maxSpeed</code> REAL Maximum speed of lane <code>edgeID</code> TEXT ID of edge to which lane belongs <code>length</code> REAL Length of lane <p>The <code>rawShape</code> of a lane is stored as a string in the database, separated by spaces and commas, respectively. For example, the following <code>rawShape</code> records three points, which are <code>(10.2, 100.3)</code>, <code>(14.3, 15.4)</code>, and <code>(13.4, 12.6)</code>.</p> <pre><code>10.2,100.3 14.3,15.4 13.4,12.6\n</code></pre>"},{"location":"AnalysisAndEvaluation/Database/#junctionlaneinfo","title":"junctionLaneINFO","text":"<p>In the SUMO road network, there are two types of lanes, one is generated by the user with a specific name. The other is a lane automatically generated by SUMO to connect the first type of lane. These lanes have the property of <code>internal</code>. Here for convenience, we define the second type of lane as the junctionLane. The junctionLane always connects two lanes, and some junctionLanes also have the property of traffic signals.</p> Field Data Type Description <code>id</code> TEXT PRIMARY KEY ID of junctionLane <code>width</code> REAL Width of junctionLane <code>maxSpeed</code> REAL Maximum speed of junctionLane <code>length</code> REAL Length of junctionLane <code>tlLogicID</code> TEXT ID of traffic signal control logic to which junctionLane belongs <code>tlIndex</code> INT Number in the traffic signal control logic to which the junctionLane belongs"},{"location":"AnalysisAndEvaluation/Database/#connectioninfo","title":"connectionINFO","text":"<p>As mentioned earlier, two lanes are connected by a junctionLane, and the connection records this connection relationship.</p> Field Data Type Description <code>fromLane</code> TEXT ID of starting lane <code>toLane</code> TEXT ID of ending lane <code>direction</code> TEXT Direction, refer to XXXX <code>via</code> TEXT ID of junctionLane that connects the two lanes together"},{"location":"AnalysisAndEvaluation/Database/#junctioninfo","title":"junctionINFO","text":"Field Data Type Description <code>id</code> TEXT PRIMARY KEY ID of junction <code>rawShape</code> TEXT Geometric structure of junction <p>Like the <code>rawShape</code> of a lane, the <code>rawShape</code> of a junction is also recorded as a string in the database, separated by spaces and commas, respectively. But the <code>rawShape</code> of the junction records the outer contour of the junction.</p>"},{"location":"AnalysisAndEvaluation/Database/#tllogicinfo","title":"tlLogicINFO","text":"Field Data Type Description <code>id</code> TEXT PRIMARY KEY ID of traffic signal control logic, also corresponding to junction ID <code>tlType</code> TEXT Type of traffic signal control logic, divided into\u00a0<code>static</code>,\u00a0<code>actuated</code>, and\u00a0<code>delay_based</code> <code>preDefPhases</code> TEXT Phases and order of traffic signal control logic, refer to XXX"},{"location":"AnalysisAndEvaluation/Database/#trafficlightstates","title":"trafficLightStates","text":"Field Data Type Description <code>frame</code> INT Current simulation time <code>id</code> TEXT ID of traffic signal control logic <code>currPhase</code> TEXT Current phase <code>nextPhase</code> TEXT Next phase <code>switchTime</code> REAL Remaining duration of current phase"},{"location":"AnalysisAndEvaluation/Database/#vehicle-information","title":"Vehicle Information","text":"<p>Vehicle information is divided into two types: inherent attributes of vehicles and real-time status during simulation.</p>"},{"location":"AnalysisAndEvaluation/Database/#vehicleinfo","title":"vehicleINFO","text":"Field Data Type Description <code>vid</code> INT ID of vehicle <code>length</code> REAL Length of vehicle <code>width</code> REAL Width of vehicle <code>maxAccel</code> REAL Maximum acceleration of vehicle <code>maxDecel</code> REAL Maximum deceleration rate of vehicle <code>maxSpeed</code> REAL Maximum speed of vehicle <code>vTypeID</code> TEXT ID of vehicle model <code>routes</code> TEXT Route information for the vehicle"},{"location":"AnalysisAndEvaluation/Database/#frameinfo","title":"frameINFO","text":"Field Data Type Description <code>frame</code> INT Current simulation time <code>vid</code> INT ID of vehicle <code>vtag</code> TEXT Role of vehicle, can be\u00a0<code>ego</code>,\u00a0<code>AoI</code>, or\u00a0<code>outOfAoI</code> <code>x</code> REAL X position of vehicle at this moment <code>y</code> REAL Y position of vehicle at this moment <code>yaw</code> REAL Yaw angle of vehicle at this moment, with x-axis as a starting point and counterclockwise as a positive direction <code>speed</code> REAL Speed of vehicle at this moment <code>accel</code> REAL Acceleration of vehicle at this moment <code>laneID</code> TEXT ID of lane in which the vehicle is located <code>lanePos</code> REAL Distance from the starting point of the lane to the vehicle at this moment <code>routeIdx</code> INT The number of the current section of the <p>Values processed</p> <p>The above indicators have been normalized and are not real values. For more information, please refer to Scenario Evaluation.</p> <ol> <li> <p>TTC(Time To Collision): refers to how long it will take for two vehicles to collide while they maintain their current speed.\u00a0\u21a9</p> </li> </ol>"},{"location":"DecisionAndPlanning/Overview/","title":"Overview","text":"<p>In LimSim, the <code>TrafficManager</code> class is used for unified management, mainly responsible for the \"prediction-decision-planning\" (PDP) process of vehicles within the AOI range, and ultimately generates a reasonable, safe, and kinematic-constraint-compliant trajectory for each vehicle.</p> <p>When using it, we need to first initialize the <code>TrafficManager</code> class, and the required parameters for initialization are as follows:</p> Parameter Name Required/Optional Description <code>model</code> Required The simulation model containing Sumo, which should be either\u00a0<code>Model</code>\u00a0or\u00a0<code>ReplayModel</code>\u00a0class. <code>predictor</code> Optional The predictor of the vehicle, which should be a subclass of\u00a0<code>AbstractPredictor</code>. <code>ego_decision</code> Optional The decision maker of the ego vehicle, which should be a subclass of\u00a0<code>AbstractEgoDecisionMaker</code>. <code>ego_planner</code> Optional The planner of the ego vehicle, which should be a subclass of\u00a0<code>AbstractEgoPlanner</code>. <code>multi_decision</code> Optional The joint decision maker for multiple vehicles, which should be a subclass of\u00a0<code>AbstractMultiDecisionMaker</code>. <code>multi_veh_planner</code> Optional The joint planner for multiple vehicles, which should be a subclass of\u00a0<code>AbstractMultiPlanner</code>. <code>config_file_path</code> Optional The configuration file path, which is responsible for storing some important configurable parameters in the PDP process. <p>LimSim has already implemented the method for the entire PDP process in advance, which means that users do not need to fill in any algorithms to run LimSim normally.</p> <p>At the same time, LimSim also supports users to replace parts or all of the algorithms in the PDP process, only need to inherit the given base class and fill in the interface, so that LimSim can have a brand new performance.</p>"},{"location":"GettingStarted/installDeploy/","title":"Installation & Deployment","text":"<p>LimSim \u662f\u4e00\u6b3e\u9762\u5411\u51b3\u7b56-\u89c4\u5212\u7b97\u6cd5\u6d4b\u8bd5\u7684\u5fae\u89c2\u4eff\u771f\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u8fdb\u884c\u5b8f\u5fae\u89c2\u4e00\u4f53\u7684\u957f\u65f6\u4eff\u771f\u3002</p>"},{"location":"GettingStarted/installDeploy/#_1","title":"\u5b89\u88c5\u90e8\u7f72","text":"<p>LimSim \u4e3b\u8981\u7531 Python \u7f16\u5199\uff0c\u65e0\u9700\u7f16\u8bd1\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u6e90\u7801\u3002\u4f46\u662f\u5728\u8fd0\u884c\u524d\u8bf7\u4fdd\u8bc1\u5177\u6709\u4ee5\u4e0b\u5f00\u53d1\u73af\u5883\uff1a</p> <ul> <li>3.9.0 &lt;= Python &lt;= 3.11.0</li> <li>SUMO &gt;= 1.15.0 (\u63a8\u8350\u4f7f\u7528 1.15.0 \u7248\u672c)</li> </ul> <p>\u5728\u8fd0\u884c\u73af\u5883\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u4e0b\u8f7d LimSim \u6e90\u7801\u5230\u672c\u5730\u5373\u53ef\uff1a</p> <pre><code>git clone https://github.com/PJLab-ADG/LimSim.git\n</code></pre> <p>\u6700\u540e\uff0c\u9700\u8981\u5b89\u88c5\u6240\u9700\u7684 Python \u6240\u9700\u7684\u6269\u5c55\uff1a</p> <pre><code>pip install -r requirements.txt\n</code></pre> <p>\u81f3\u6b64\uff0cLimSim \u7684\u672c\u5730\u5b89\u88c5\u90e8\u7f72\u5b8c\u6210\u3002</p>"},{"location":"GettingStarted/installDeploy/#_2","title":"\u4eff\u771f\u793a\u4f8b","text":"<p>\u5728\u6839\u76ee\u5f55\u4e0b\uff0c\u6709\u4e00\u4e9b\u4eff\u771f\u793a\u4f8b\u6765\u8bf4\u660e LimSim \u7684\u529f\u80fd\uff0c\u8bbf\u95ee\u4e0b\u9762\u7684\u94fe\u63a5\uff0c\u4e86\u89e3\u529f\u80fd\u8be6\u60c5\uff1a</p> <ul> <li>\u5b9e\u65f6\u4eff\u771f</li> <li>\u56de\u653e\u4e0e\u4ea4\u4e92\u5f0f\u56de\u653e</li> <li>\u5176\u4ed6\u529f\u80fd</li> </ul>"},{"location":"GettingStarted/otherFunction/","title":"Other Functions","text":"<p>\u4e3a\u9002\u5e94\u4e0d\u540c\u7684\u4efb\u52a1\u9700\u6c42\uff0cLimSim \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u989d\u5916\u7684\u529f\u80fd\uff0c\u8be6\u60c5\u5982\u4e0b\u3002</p>"},{"location":"GettingStarted/otherFunction/#_1","title":"\u56fa\u5b9a\u573a\u666f\u4eff\u771f","text":"<p>\u9664\u4e86\u8ddf\u968f Ego \u8fdb\u884c\u957f\u65f6\u7684\u4eff\u771f\u6d4b\u8bd5\uff0cLimSim \u8fd8\u63d0\u4f9b\u4e86\u56fa\u5b9a\u89c6\u89d2\u7684\u4eff\u771f\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0cAoI \u5e76\u4e0d\u968f\u67d0\u8f86\u8f66\u79fb\u52a8\uff0c\u800c\u662f\u56fa\u5b9a\u5728\u6307\u5b9a\u7684\u4f4d\u7f6e\u4e0a\uff0c\u800c\u8fdb\u5165 AoI \u7684\u8f66\u8f86\u4ecd\u7136\u4f1a\u53d7\u5230\u51b3\u7b56\u89c4\u5212\u7b97\u6cd5\u7684\u63a7\u5236\u3002\u8be5\u6a21\u5f0f\u7684\u8c03\u7528\u65b9\u6cd5\u4e0e\u5b9e\u65f6\u4eff\u771f\u57fa\u672c\u4e00\u81f4\uff0c\u8fd0\u884c <code>FixedSimExample.py</code> \u5373\u67e5\u770b\u56fa\u5b9a\u573a\u666f\u7684\u4eff\u771f\u793a\u4f8b\u3002\u8be5\u6a21\u5f0f\u4e0b\u540c\u6837\u6709\u56de\u653e\u529f\u80fd\u548c\u4ea4\u4e92\u5f0f\u56de\u653e\u529f\u80fd\uff0c\u8fd0\u884c <code>FixedSimReplayExample.py</code> \u548c <code>FixedSimInterReplayExample</code> \u53ef\u67e5\u770b\u76f8\u5173\u7684\u793a\u4f8b\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002</p>"},{"location":"GettingStarted/otherFunction/#_2","title":"\u952e\u76d8\u64cd\u7eb5\u51b3\u7b56","text":"<p>LimSim \u7684\u51b3\u7b56\u89c4\u5212\u7b97\u6cd5\u63d0\u4f9b\u4e86\u952e\u76d8\u64cd\u7eb5\u7684\u529f\u80fd\uff0c\u5728\u8fd0\u884c\u51b3\u7b56\u89c4\u5212\u7b97\u6cd5\u65f6\uff0c\u70b9\u51fb\u952e\u76d8 <code>&lt;-</code> \u952e\u6216 <code>A</code> \u952e\uff0c\u4f1a\u5411 Ego \u4f20\u9012\u5411\u5de6\u53d8\u9053\u7684\u51b3\u7b56\u4fe1\u606f\uff0c\u5982\u679c\u73af\u5883\u5141\u8bb8\uff0c\u8f66\u8f86\u4f1a\u5411\u5de6\u53d8\u9053\u3002\u7c7b\u4f3c\u7684\uff0c\u70b9\u51fb <code>-&gt;</code> \u952e\u6216 <code>D</code> \u952e\uff0cEgo \u4f1a\u6536\u5230\u5411\u53f3\u53d8\u9053\u7684\u51b3\u7b56\u4fe1\u606f\u3002</p>"},{"location":"GettingStarted/otherFunction/#_3","title":"\u4eff\u771f\u6c47\u62a5","text":"<p>\u5bf9\u4e8e\u4eff\u771f\u751f\u6210\u7684\u6570\u636e\u5e93\uff0cLimSim \u63d0\u4f9b\u4e86\u4e00\u4e2a\u6574\u4f53\u7684\u5206\u6790\u4e0e\u6c47\u62a5\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u6307\u4ee4\uff0c\u4f1a\u751f\u6210\u6c47\u62a5\u6587\u4ef6 <code>report/report.md</code>\u3002</p> <pre><code>python utils/report.py egoTrackingTest.db\n</code></pre> <p>\u6c47\u62a5\u6587\u4ef6\u4e3b\u8981\u662f\u5bf9\u4eff\u771f\u7684\u7ed3\u679c\u7684\u6574\u4f53\u8bc4\u4ef7\uff0c\u6bd4\u5982\u7ed8\u5236\u901f\u5ea6\u5206\u5e03\u66f2\u7ebf\uff0c\u663e\u793a\u5371\u9669\u573a\u666f\u7684\u6b21\u6570\u7b49\u3002</p>"},{"location":"GettingStarted/otherFunction/#limsim-sumo-carla","title":"LimSim, SUMO, CARLA \u534f\u540c\u4eff\u771f","text":"<p>CARLA \u662f\u4e00\u6b3e\u5f00\u6e90\u7684\u81ea\u52a8\u9a7e\u9a76\u4eff\u771f\u5668\uff0c\u5177\u6709\u5305\u62ec\u611f\u77e5\u3001\u5b9a\u4f4d\u7b49\u5728\u5185\u7684\u591a\u4e2a\u529f\u80fd\uff0c\u53ef\u4ee5\u7528\u6765\u5e2e\u52a9\u8bad\u7ec3\u81ea\u52a8\u9a7e\u9a76\u7684\u5404\u4e2a\u6a21\u5757\u3002CARLA \u5b98\u65b9\u63d0\u4f9b\u7684 SUMO co-simulation \u529f\u80fd\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u5229\u7528 SUMO \u7ba1\u7406\u4eff\u771f\u7684\u80cc\u666f\u4ea4\u901a\u6d41\uff0c\u4e5f\u4f7f\u5f97 LimSim, SUMO, CARLA \u7684\u534f\u540c\u4eff\u771f\u6210\u4e3a\u53ef\u80fd\u3002</p> <p>\u8fdb\u884c\u534f\u540c\u4eff\u771f\u4e3b\u8981\u5229\u7528 SUMO \u7684\u5e73\u884c\u4eff\u771f(Parallel simulation) \u529f\u80fd\uff0c\u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u540e\uff0c\u4e3b\u7a0b\u5e8f\u7684\u53ef\u4ee5\u4f5c\u4e3a Server \u4eff\u771f\uff0c\u800c\u5b50\u7a0b\u5e8f\u53ef\u4ee5\u4f5c\u4e3a Client \u63a5\u53d7\u6570\u636e\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06 LimSim \u4f5c\u4e3a\u4e3b\u7a0b\u5e8f\u8fd0\u884c\uff0c\u5c06 CARLA \u7684 co-simulation \u4f5c\u4e3a\u5b50\u7a0b\u5e8f\u8fd0\u884c\u3002</p>"},{"location":"GettingStarted/realtimeSim/","title":"Real-time Simulation","text":"<p>\u8ddf\u968f Ego \u7684\u5b9e\u65f6\u4eff\u771f\u662f LimSim \u7684\u57fa\u7840\u529f\u80fd\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u6307\u4ee4\uff0c\u4f53\u9a8c\u4e00\u4e0b\uff1a</p> <pre><code>cd LimSim\npython ModelExample.py\n</code></pre>"},{"location":"GettingStarted/realtimeSim/#_1","title":"\u754c\u9762\u5e03\u5c40","text":"<p>\u82e5\u4e0a\u8ff0\u6307\u4ee4\u8fd0\u884c\u6b63\u5e38\uff0c\u4f1a\u663e\u793a\u5982\u4e0b\u753b\u9762\uff1a</p> <p></p> <p>\u6574\u4e2a\u56fe\u5f62\u754c\u9762\u5206\u4e3a\u4e94\u4e2a\u533a\u57df\u3002A \u533a\u663e\u793a\u8def\u7f51\u7684\u5168\u5c40\u89c6\u89d2\uff0c\u9ec4\u8272\u5706\u5708\u662f\u8ddf\u968f Ego \u79fb\u52a8\u7684\u611f\u5174\u8da3\u533a\u57df (Area of Interest, AoI)\uff0c\u5373\u663e\u793a Ego \u5728\u6574\u4e2a\u8def\u7f51\u4e2d\u7684\u5b9e\u65f6\u4f4d\u7f6e\uff1bB \u533a\u663e\u793a Ego \u7684\u8ddf\u968f\u89c6\u89d2\uff0c\u9ec4\u8272\u534a\u900f\u660e\u5706\u5708\u540c\u6837\u662f AoI\uff0c\u4e0e A \u533a\u4e2d\u7684\u5706\u5708\u662f\u4e00\u81f4\u7684\uff0c\u8f66\u8f86\u524d\u65b9\u7d2b\u8272\u66f2\u7ebf\u4e3a\u8f68\u8ff9\u89c4\u5212\u7b97\u6cd5\u63d0\u4f9b\u7684\u8f68\u8ff9\uff1bC \u533a\u4e3a Ego \u7684\u72b6\u6001\u663e\u793a\u533a\uff0c\u4f1a\u663e\u793a Ego \u7684\u5b9e\u65f6\u901f\u5ea6\u548c\u52a0\u901f\u5ea6\u3002\u6ce8\u610f X \u8f74\u7684\u5750\u6807\uff0c0 \u70b9\u5728 x \u8f74\u7684\u6b63\u4e2d\u95f4\uff0c\u8868\u793a\u5f53\u524d\u65f6\u523b\uff0c0 \u70b9\u5de6\u534a\u8fb9\u8868\u793a\u5386\u53f2\u7684\u901f\u5ea6\u548c\u52a0\u901f\u5ea6\uff0c0 \u70b9\u7684\u53f3\u534a\u8fb9\u8868\u793a\u672a\u6765\u7684\u901f\u5ea6\u548c\u52a0\u901f\u5ea6\uff08\u5373\u89c4\u5212\u7b97\u6cd5\u63d0\u4f9b\u7684\u901f\u5ea6\u548c\u52a0\u901f\u5ea6\uff09\uff0c\u6b64\u5916\u901f\u5ea6\u8f74\u7684\u53d6\u503c\u8303\u56f4\u53d6\u51b3\u4e8e\u9053\u8def\u7684\u9650\u901f\uff1bD \u533a\u4e3a\u4eff\u771f\u4fe1\u606f\u5c55\u793a\u533a\u57df\uff0c\u663e\u793a\u4eff\u771f\u7684\u6a21\u5f0f\uff0c\u4eff\u771f\u65f6\u523b\uff0cEgo \u6240\u5728\u8f66\u9053\uff0c\u4ee5\u53ca Ego \u5728\u8f66\u9053\u4e0a\u7684\u4f4d\u7f6e\uff1bE \u533a\u4e3a\u573a\u666f\u8bc4\u4ef7\u533a\u57df\uff0c\u5b9e\u65f6\u663e\u793a\u5bf9\u573a\u666f\u7684\u8bc4\u4ef7\uff0c\u6bcf\u4e2a\u6307\u6807\u7684\u5177\u4f53\u542b\u4e49\u8bf7\u53c2\u8003 \u573a\u666f\u8bc4\u4ef7\u3002</p> <p>AoI (Area of Interest)</p> <p>AoI \u53ef\u4ee5\u89c6\u4e3a Ego \u7684\u611f\u77e5\u533a\u57df\uff0c\u662f LimSim \u4e3a\u4e86\u8fdb\u884c\u957f\u65f6\u4eff\u771f\u505a\u51fa\u7684\u6298\u4e2d\u65b9\u6848\u3002\u957f\u65f6\u4eff\u771f\u610f\u5473\u7740\u5927\u8303\u56f4\u8def\u7f51\u548c\u5927\u91cf\u4ea4\u901a\u6d41\uff0c\u65e0\u6cd5\u5bf9\u6240\u6709\u8f66\u8f86\u8fdb\u884c\u8f68\u8ff9\u89c4\u5212\u3002\u56e0\u6b64\uff0cAoI \u5185\u90e8\u7684\u8f66\u8f86\uff0c\u5176\u884c\u4e3a\u7531\u51b3\u7b56-\u89c4\u5212\u6a21\u578b\u63a7\u5236\uff0c\u5728 Ego \u7684\u5468\u56f4\u8425\u9020\u591a\u6837\u4e14\u771f\u5b9e\u7684\u9a7e\u9a76\u73af\u5883\uff1bAoI \u5916\u90e8\u7684\u8f66\u8f86\uff0c\u7531 SUMO \u63a7\u5236\uff0c\u7b26\u5408\u57fa\u672c\u7684\u4ea4\u901a\u89c4\u5f8b\u3002</p>"},{"location":"GettingStarted/realtimeSim/#_2","title":"\u793a\u4f8b\u5206\u6790","text":"<p>\u8be5\u4eff\u771f\u793a\u4f8b\u5177\u6709\u5982\u4e0b\u7684\u7ed3\u6784\uff1a</p> <pre><code>from simModel.egoTracking.model import Model\nfrom trafficManager.traffic_manager import TrafficManager\nnetFile = 'data/networkFiles/CarlaTown05/Town05.net.xml'\nrouFile = 'data/networkFiles/CarlaTown05/carlavtypes.rou.xml,data/networkFiles/CarlaTown05/Town05.rou.xml'\nif __name__ == '__main__': # (1)\nmodel = Model(\negoID = '61', \nnetFile = netFile, \nrouFile = rouFile, \ndataBase = 'egoTrackingTest.db'\n)\nmodel.start()\nplanner = TrafficManager(model)\nwhile not model.tpEnd:\nmodel.moveStep()\nif model.timeStep % 5 == 0:\nroadgraph, vehicles = model.exportSce()\nif model.tpStart and roadgraph:\ntrajectories = planner.plan(\nmodel.timeStep * 0.1, roadgraph, vehicles)\nmodel.setTrajectories(trajectories)\nelse:\nmodel.ego.exitControlMode() # (2)\nmodel.updateVeh()\nmodel.destroy()\n</code></pre> <ol> <li>  \u5728 Windows \u7cfb\u7edf\u4e0b\uff0c\u8bf7\u52a1\u5fc5\u4fdd\u8bc1 model \u7684\u76f8\u5173\u4ee3\u7801\u90fd\u5728 <code>if __name__ == '__main__':</code> \u8303\u56f4\u5185\uff0c\u5426\u5219\u7a0b\u5e8f\u4f1a\u5d29\u6e83\u3002\u4e3b\u8981\u539f\u56e0\u5728\u4e8e SUMO \u4f7f\u7528\u4e86 Python \u7684 multiprocessing \u6a21\u5757\uff0c\u800c\u8be5\u6a21\u5757\u4ea7\u751f\u8fdb\u7a0b\u7684\u65b9\u6cd5\uff0c\u5728 Windows \u4e0b \u548c Linux \u4e0b\u5b58\u5728\u4e0d\u540c\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\uff1acontexts-and-start-methods</li> <li>\u5982\u679c\u4e0d\u518d\u63a7\u5236 Ego\uff0c\u8bb0\u5f97\u5c06\u63a7\u5236\u6743\u4ea4\u8fd8\u7ed9 SUMO\u3002</li> </ol> <p>\u7a0b\u5e8f\u7684\u7b2c 8 \u884c\u662f\u6a21\u578b\u7684\u521d\u59cb\u5316\uff0c\u4e3b\u8981\u7684\u53c2\u6570\u6709 <code>egoID</code> \uff0c\u7528\u6765\u6307\u5b9a\u7684 Ego car \u7684 ID\u3002\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 SUMO \u8fdb\u884c\u73af\u5883\u4ea4\u901a\u6d41\u7684\u7ba1\u7406\uff0c\u8def\u7f51\u4e2d\u6240\u6709\u8f66\u8f86\u7684\u8def\u5f84\u4fe1\u606f\u5b9e\u9645\u4e0a\u662f\u88ab\u5b9a\u4e49\u5728 <code>Town05.rou.xml</code> \u4e2d\u7684\u3002\u56e0\u6b64\u4f60\u53ef\u4ee5\u67e5\u770b\u8fd9\u4e2a\u6587\u4ef6\uff0c\u9009\u62e9\u559c\u6b22\u7684\u4e00\u8f86\u8f66\u4f5c\u4e3a Ego car\uff0c\u6216\u8005\u4f60\u53ef\u4ee5\u53c2\u8003 \u81ea\u5b9a\u4e49\u8f66\u8f86\u548c\u8def\u5f84\u6765\u751f\u6210\u7279\u5b9a\u8def\u5f84\u7684\u8f66\u8f86\u6765\u8fdb\u884c\u6a21\u578b\u7684\u4eff\u771f\u548c\u7b97\u6cd5\u7684\u6d4b\u8bd5\u3002\u7136\u540e\u662f\u4eff\u771f\u4f7f\u7528\u7684\u8def\u7f51\u8def\u7f51\u6587\u4ef6 <code>netFile</code> \u548c\u8def\u5f84\u6587\u4ef6 <code>rouFile</code> \uff0c\u8fd9\u4e9b\u6587\u4ef6\u7684\u751f\u6210\u548c\u5b9a\u4e49\u8bf7\u53c2\u8003 SUMO \u7684\u6587\u6863\u3002<code>dataBase</code> \u4e3a\u8bb0\u5f55\u4eff\u771f\u6570\u636e\u7684\u6570\u636e\u5e93\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u3002</p> <p>\u7b2c 15 \u884c\u662f\u8f68\u8ff9\u89c4\u5212\u7b97\u6cd5\u7684\u521d\u59cb\u5316\uff0c\u5305\u62ec\u8f68\u8ff9\u9884\u6d4b\u3001\u51b3\u7b56\u3001\u89c4\u5212\u7b49\u591a\u4e2a\u6a21\u5757\u3002\u8fd9\u91cc\u4f7f\u7528\u4e86 LimSim \u5b9e\u73b0\u7684\u57fa\u7840\u7248\u672c\uff08\u9ed8\u8ba4\u53c2\u6570\uff09\uff0c\u7528\u4ee5\u63a7\u5236 AoI \u4e2d\u7684\u8f66\u8f86\uff0c\u4f60\u4e5f\u53ef\u4ee5\u66ff\u6362\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u73af\u8282\u4e3a\u4f60\u81ea\u5df1\u7684\u7b97\u6cd5\uff0c\u5177\u4f53\u7684\u81ea\u5b9a\u4e49\u65b9\u6cd5\u8bf7\u53c2\u8003 \u81ea\u5b9a\u4e49\u7b97\u6cd5\u3002</p> <p>17 \u884c\u5f00\u59cb\u662f\u7a0b\u5e8f\u8fd0\u884c\u7684\u4e3b\u8981\u73af\u8282\uff0c<code>model.tpEnd</code> \u662f\u5e03\u5c14\u53d8\u91cf\uff0c\u7528\u6765\u8868\u5f81 Ego \u662f\u5426\u5230\u8fbe\u7ec8\u70b9\uff0c\u5373\u7a0b\u5e8f\u662f\u5426\u7ed3\u675f\u3002<code>model.moveStep()</code> \u548c <code>model.updateVeh()</code> \u662f\u4eff\u771f\u66f4\u65b0\u7684\u6d41\u7a0b\uff0c\u524d\u8005\u7528\u4e8e\u83b7\u53d6\u6240\u6709\u4ea4\u901a\u53c2\u4e0e\u8005\u7684\u4fe1\u606f\uff0c\u540e\u8005\u7528\u4e8e\u66f4\u65b0\uff08\u63a7\u5236\uff09\u6240\u6709\u4ea4\u901a\u53c2\u4e0e\u8005\u7684\u4fe1\u606f\u3002\u56e0\u6b64\u5728\u4e24\u8005\u4e4b\u95f4\uff0c\u53ef\u4ee5\u7528\u8f68\u8ff9\u89c4\u5212\u7b97\u6cd5\u63a7\u5236 AoI \u4e2d\u7684\u8f66\u8f86\u3002</p> <p>\u7531\u4e8e\u8f68\u8ff9\u89c4\u5212\u7b97\u6cd5\u901a\u5e38\u6bd4\u8f83\u8017\u65f6\uff0c\u800c\u4e14\u4e00\u6b21\u89c4\u5212\u53ef\u4ee5\u7ed9\u51fa\u672a\u6765\u591a\u5e27\u7684\u8f68\u8ff9\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6bcf 5 \u5e27\u8fdb\u884c\u4e00\u6b21\u8f68\u8ff9\u89c4\u5212\uff0c\u5373 <code>if model.timeStep % 5 == 0:</code>\u3002\u7136\u540e\uff0c\u7531 <code>roadgraph, vehicles = model.exportSce()</code> \u83b7\u5f97\u5f53\u524d\u65f6\u523b Ego \u9644\u8fd1\u7684\u573a\u666f\u3002\u5176\u4e2d\uff0c<code>roadgraph</code> \u4e3a Ego \u5468\u56f4\u7684\u8def\u7f51\u4fe1\u606f\uff0c<code>vehicles</code> \u4e3a Ego \u5468\u56f4\u8f66\u8f86\u7684\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u7684\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003 XXXXX\u3002\u8f68\u8ff9\u89c4\u5212\u7b97\u6cd5\u8fd4\u56de\u7684\u8f68\u8ff9\u5219\u901a\u8fc7 <code>model.setTrajectories()</code> \u4f20\u56de\u4eff\u771f\u4e2d\u3002</p> <p>\u4e0a\u8ff0\u4eff\u771f\u8fd0\u884c\u5b8c\u6210\u540e\uff0c\u4f1a\u5c06\u4eff\u771f\u8fc7\u7a0b\u4e2d\u6240\u6709\u7684\u6570\u636e\u5b58\u653e\u5728 <code>egoTrackingTest.db</code> \u4e2d\uff0c\u4f9b\u56de\u653e\u548c\u5206\u6790\u6240\u7528\uff0c\u5173\u4e8e\u6570\u636e\u5e93\u7684\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u53c2\u8003\u6570\u636e\u5e93\u3002</p>"},{"location":"GettingStarted/replayAndIreplay/","title":"Replay & Interactive Replay","text":"<p>\u56de\u653e\u662f\u4eff\u771f\u7a0b\u5e8f\u7684\u91cd\u8981\u529f\u80fd\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u6df1\u5165\u5206\u6790\u5371\u9669\u573a\u666f\u548c\u5931\u8d25\u573a\u666f\u4ea7\u751f\u7684\u539f\u56e0\uff0c\u4ece\u800c\u4f18\u5316\u76f8\u5173\u7b97\u6cd5\u3002LimSim \u540c\u6837\u63d0\u4f9b\u4e86\u56de\u653e\u529f\u80fd\uff0c\u53ef\u4ee5\u5bf9\u5b9e\u65f6\u4eff\u771f\u751f\u6210\u7684\u6570\u636e\u8fdb\u884c\u56de\u653e\u3002\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4ea4\u4e92\u5f0f\u56de\u653e\u529f\u80fd\uff0c\u5e2e\u52a9\u7b97\u6cd5\u5728\u5173\u952e\u573a\u666f\u4e0a\u8fdb\u884c\u66f4\u65b0\u8fed\u4ee3\u3002</p>"},{"location":"GettingStarted/replayAndIreplay/#_1","title":"\u4eff\u771f\u56de\u653e","text":"<p>\u5728\u6839\u76ee\u5f55\u4e0b\uff0c\u8fd0\u884c\u4e0b\u5217\u6307\u4ee4\u53ef\u4ee5\u8c03\u7528 LimSim \u7684\u56de\u653e\u529f\u80fd\uff1a</p> <pre><code>python ReplayExample.py\n</code></pre>"},{"location":"GettingStarted/replayAndIreplay/#_2","title":"\u754c\u9762\u5e03\u5c40","text":"<p>\u4e0a\u8ff0\u6307\u4ee4\u4f1a\u8c03\u51fa\u56de\u653e\u529f\u80fd\u7684\u754c\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a:</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u76f8\u8f83\u4e8e\u5b9e\u65f6\u4eff\u771f\uff0c\u56de\u653e\u7684\u754c\u9762\u591a\u4e86\u4e00\u4e2a\u63a7\u5236\u9762\u677f\uff0c\u8be5\u533a\u57df\u53ef\u4ee5\u63a7\u5236\u56de\u653e\u7684\u5f00\u59cb\u4e0e\u6682\u505c\uff0c\u56de\u653e\u7684\u901f\u5ea6\u7b49\uff0c\u65b9\u4fbf\u67e5\u770b\u4eff\u771f\u7684\u5173\u952e\u7ec6\u8282\u3002\u6b64\u5916\u5728 B \u533a\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8f66\u8f86\u524d\u65b9\u6709\u7c89\u7ea2\u8272\u7684\u66f2\u7ebf\uff0c\u8be5\u66f2\u7ebf\u662f\u6570\u636e\u5e93\u8bb0\u5f55\u7684\u8f66\u8f86\u7684\u672a\u6765\u8f68\u8ff9\uff0c\u8f66\u8f86\u4f1a\u5b8c\u5168\u6309\u7167\u7c89\u7ea2\u8272\u66f2\u7ebf\u7684\u8f68\u8ff9\u884c\u9a76\uff0c\u6211\u4eec\u5c06\u5176\u79f0\u4e3a <code>dbTrajectory</code>\uff1b\u4e0e\u4e4b\u5bf9\u5e94\u7684\uff0c\u8f68\u8ff9\u89c4\u5212\u7b97\u6cd5\u63d0\u4f9b\u7684\u7d2b\u8272\u66f2\u7ebf\u88ab\u5b9a\u4e49\u4e3a <code>plannedTrajectory</code>\u3002C \u533a\u5728\u663e\u793a\u8f66\u8f86\u72b6\u6001\u65f6\uff0c\u5728 0 \u70b9\u7684\u53f3\u4fa7\uff0c\u540c\u6837\u662f\u663e\u793a\u6570\u636e\u5e93\u4e2d\u8bb0\u5f55\u7684\u8f66\u8f86\u7684\u901f\u5ea6\u548c\u52a0\u901f\u5ea6\u3002</p>"},{"location":"GettingStarted/replayAndIreplay/#_3","title":"\u793a\u4f8b\u5206\u6790","text":"<p>\u4eff\u771f\u56de\u653e\u7684\u793a\u4f8b\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>rmodel = ReplayModel(dataBase = 'egoTrackingTest.db')\nwhile not rmodel.tpEnd:\nrmodel.moveStep() # (1)\nrmodel.gui.destroy()\n</code></pre> <ol> <li> \u8fd9\u91cc\u7531\u4e8e\u4e0d\u9700\u8981\u4e0e SUMO \u4ea4\u6362\u6570\u636e\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u8fd0\u884c <code>rmodel.moveStep()</code> \u5373\u53ef\u3002</li> </ol> <p>\u4eff\u771f\u56de\u653e\u7684\u521d\u59cb\u5316\u53ea\u9700\u8981\u6307\u5b9a\u6570\u636e\u5e93\uff0c\u4e14\u4e0d\u9700\u8981\u540c\u5916\u90e8\u8fdb\u884c\u4ea4\u4e92\uff0c\u56e0\u6b64\u8be5\u793a\u4f8b\u7684\u4ee3\u7801\u76f8\u5bf9\u7b80\u5355\u3002</p>"},{"location":"GettingStarted/replayAndIreplay/#_4","title":"\u4ea4\u4e92\u5f0f\u56de\u653e","text":"<p>\u5728\u81ea\u52a8\u9a7e\u9a76\u6d4b\u8bd5\u4eff\u771f\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u90e8\u5206\u5371\u9669\u573a\u666f\u548c\u5931\u8d25\u573a\u666f\uff0c\u8fd9\u4e9b\u573a\u666f\u662f\u81ea\u52a8\u9a7e\u9a76\u6d4b\u8bd5\u5347\u7ea7\u7684\u91cd\u8981\u6570\u636e\u6765\u6e90\u3002\u56e0\u6b64\uff0c\u5728\u5371\u9669\u573a\u666f\u4e0a\u8fdb\u884c\u91cd\u65b0\u6d4b\u8bd5\u662f\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u529f\u80fd\u3002\u7136\u800c\uff0c\u5982\u679c\u4ec5\u5bf9 Ego \u8fdb\u884c\u91cd\u65b0\u63a7\u5236\uff0c\u5468\u56f4\u7684\u8f66\u8f86\u4e0d\u5bf9 Ego \u7684\u884c\u4e3a\u505a\u51fa\u54cd\u5e94\uff0c\u6d4b\u8bd5\u5c31\u5931\u53bb\u4e86\u672c\u8eab\u7684\u610f\u4e49\u3002\u56e0\u6b64\uff0cLimSim \u63d0\u4f9b\u4e86\u4ea4\u4e92\u5f0f\u56de\u653e\u7684\u529f\u80fd\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u5728\u5371\u9669\u573a\u666f\u4e2d\u8fed\u4ee3\u7b97\u6cd5\u3002</p> <p></p> <p>\u4ea4\u4e92\u5f0f\u4eff\u771f\u9700\u8981\u4e3a\u573a\u666f\u4e2d\u7684\u8f66\u8f86\u89c4\u5212\u65b0\u7684\u8f68\u8ff9\uff0c\u4e5f\u5c31\u9700\u8981\u5904\u7406\u65b0\u65e7\u8f68\u8ff9\u4e4b\u95f4\u7684\u51b2\u7a81\u3002\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e24\u8f66\u6309\u7167\u539f\u59cb\u8f68\u8ff9\u884c\u9a76\u662f\u6ca1\u6709\u51b2\u7a81\u7684\uff0c\u4f46\u662f\u5f53 ego \u6539\u53d8\u8f68\u8ff9\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u80fd\u4e0e\u5176\u4ed6\u8f66\u8f86\u53d1\u751f\u78b0\u649e\u3002\u8fd9\u65f6\uff0c\u5176\u4ed6\u8f66\u8f86\u9700\u8981\u505a\u51fa\u54cd\u5e94\u6765\u907f\u514d\u78b0\u649e\uff0c\u4e5f\u5c31\u662f\u6309\u7167\u56fe\u4e2d\u7d2b\u8272\u7684\u8f68\u8ff9\u6765\u884c\u9a76\u3002\u7136\u800c\uff0c\u5f53ego \u8fdc\u79bb\u4e86\u8fd9\u4e2a\u573a\u666f\uff0c\u521a\u624d\u88ab\u63a7\u5236\u7684\u8f66\u8f86\u5c31\u9762\u4e34\u4e00\u4e2a\u95ee\u9898\u2014\u2014\u662f\u5426\u56de\u5230\u539f\u8f68\u8ff9\u4e0a\u3002\u5982\u679c\u56de\u5230\u539f\u8f68\u8ff9\u4e0a\uff0c\u5c31\u4f1a\u4ea7\u751f\u4f4d\u7f6e\u7684\u7a81\u53d8\uff0c\u53ef\u80fd\u5bfc\u81f4\u65b0\u7684\u51b2\u7a81\uff0c\u5982\u679c\u4e0d\u56de\u5230\u539f\u8f68\u8ff9\u4e0a\uff0c\u5219\u8f66\u8f86\u540e\u7eed\u7684\u8f68\u8ff9\u5c31\u6ca1\u6709\u4e86\u53ea\u80fd\u505c\u5728\u539f\u5730\u6216\u6d88\u5931\u3002</p> <p>LimSim \u5c06\u4e0a\u8ff0\u95ee\u9898\u62c6\u6210\u4e09\u4e2a\u5b50\u95ee\u9898\u6765\u89e3\u51b3\uff1a1. \u4f55\u65f6\u4e3a\u8f66\u8f86\u89c4\u5212\u65b0\u7684\u8f68\u8ff9\uff1b2. \u89c4\u5212\u8f68\u8ff9\u8981\u6301\u7eed\u591a\u4e45\uff1b3. \u8f68\u8ff9\u89c4\u5212\u7ed3\u675f\u540e\uff0c\u5982\u4f55\u5904\u7406\u8fd9\u8f86\u8f66\u3002</p> <p>\u7b2c\u4e00\uff0c\u4e3a\u8f66\u8f86\u89c4\u5212\u65b0\u7684\u8f68\u8ff9\u5e76\u4e0d\u662f\u8d8a\u65e9\u8d8a\u597d\uff0c\u5982\u679c\u8f66\u8f86\u521a\u751f\u6210\u5c31\u4e3a\u5176\u89c4\u5212\u65b0\u7684\u8f68\u8ff9\uff0c\u90a3\u5bf9\u6570\u636e\u7684\u5229\u7528\u7a0b\u5ea6\u592a\u4f4e\uff0c\u4ec5\u4ec5\u7528\u5230\u4e86\u8f66\u8f86\u751f\u6210\u7684\u4f4d\u7f6e\u3002\u56e0\u6b64 LimSim \u4f7f\u7528\u78b0\u649e\u68c0\u6d4b\u6765\u5224\u65ad\u662f\u5426\u9700\u8981\u4e3a\u8f66\u8f86\u89c4\u5212\u65b0\u7684\u8f68\u8ff9\u3002\u5982\u679c\u8f66\u8f86\u7684\u539f\u59cb\u8f68\u8ff9\u4e0e\u5176\u4ed6\u8f66\u8f86\u7684\u65b0\u8f68\u8ff9\u51b2\u7a81\uff08\u8f66\u8f86\u9996\u5148\u8981\u5728 AoI \u5185\uff09\uff0c\u5219\u9700\u8981\u4e3a\u8f66\u8f86\u91cd\u65b0\u89c4\u5212\u8f68\u8ff9\uff0c\u5426\u5219\u5c31\u7ef4\u6301\u539f\u8f68\u8ff9\u884c\u9a76\u3002</p> <p>\u7b2c\u4e8c\uff0c\u524d\u6587\u63d0\u5230\u8f66\u8f86\u8131\u79bb\u63a7\u5236\u540e\u8981\u4e48\u8df3\u56de\u539f\u8f68\u8ff9\uff0c\u8981\u4e48\u505c\u5728\u539f\u5730\u6216\u6d88\u5931\u3002\u8fd9\u4e24\u79cd\u5f62\u5f0f\u663e\u7136\u90fd\u4f1a\u5927\u5927\u964d\u4f4e\u4eff\u771f\u7684\u8fde\u8d2f\u6027\u548c\u6709\u6548\u6027\u3002\u56e0\u6b64 LimSim \u4f1a\u5224\u65ad\u8131\u79bb\u63a7\u5236\u7684\u8f66\u8f86\u662f\u5426\u8fd8\u5728 AoI \u5185\uff0c\u5982\u679c\u8f66\u8f86\u4ecd\u5728 AoI \u5185\uff0c\u5373\u4f7f\u4e0d\u518d\u51b2\u7a81\uff0cLimSim \u4f9d\u7136\u4f1a\u7ee7\u7eed\u4e3a\u5176\u89c4\u5212\u8f68\u8ff9\uff0c\u76f4\u5230\u5176\u79bb\u5f00 AoI\u3002\u8fd9\u6837\u505a\u4e3b\u8981\u662f\u4e3a\u4e86\u4fdd\u8bc1 AoI \u5185\u7684\u573a\u666f\u662f\u8fde\u8d2f\u7684\uff0c\u800c\u5728 AoI \u5916\u7684\u8f66\u8f86\u5219\u5bf9 ego \u7684\u5f71\u54cd\u8f83\u5c0f\u3002</p> <p>\u7b2c\u4e09\uff0c\u5f53\u8f66\u8f86\u4e0d\u518d\u9700\u8981\u4ea4\u4e92\uff0c\u4e14\u79bb\u5f00\u4e86 AoI\uff0c\u5219\u63a7\u5236\u9636\u6bb5\u7ed3\u675f\u3002\u8fd9\u65f6\u5982\u679c\u8ba9\u8f66\u8f86\u56de\u5230\u539f\u8f68\u8ff9\uff0c\u5219\u53ef\u80fd\u4e0e\u5176\u4ed6\u8f66\u8f86\u53d1\u751f\u78b0\u649e\uff0c\u56e0\u6b64 LimSim \u9009\u62e9\u76f4\u63a5\u9500\u6bc1\u8fd9\u8f86\u8f66\u3002\u5982\u679c\u6570\u636e\u96c6\u4e2d\u8fd8\u6709\u8fd9\u8f86\u8f66\u7684\u5269\u4f59\u8f68\u8ff9\uff0c\u5219\u4f1a\u5728\u5bf9\u5e94\u7684\u65f6\u523b\u91cd\u65b0\u751f\u6210\u8fd9\u8f86\u8f66\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cLimSim \u5728\u751f\u6210\u8f66\u8f86\u7684\u65f6\u5019\uff0c\u90fd\u4f1a\u5224\u65ad\u8be5\u8f66\u662f\u5426\u4f1a\u4e0e\u8def\u7f51\u4e2d\u73b0\u6709\u7684\u8f66\u8f86\u4ea7\u751f\u51b2\u7a81\uff0c\u5982\u679c\u4e0d\u51b2\u7a81\u5219\u751f\u6210\u8f66\u8f86\uff0c\u53cd\u4e4b\uff0c\u5219\u5ef6\u8fdf\u5230\u4e0b\u4e00\u4e2a\u65f6\u523b\u518d\u751f\u6210\u3002</p> <p>\u78b0\u649e\u68c0\u6d4b</p> <p>\u4e00\u822c\u7684\u78b0\u649e\u68c0\u6d4b\u7b97\u6cd5\u4f1a\u4f7f\u7528\u5206\u79bb\u8f74\u5b9a\u7406\u5224\u65ad\u4e24\u4e2a\u77e9\u5f62\u662f\u5426\u76f8\u4ea4\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5224\u65ad\u67d0\u4e2a\u65f6\u523b\u4e24\u8f66\u662f\u5426\u76f8\u649e\u3002\u4f46\u662f\u5728\u4eff\u771f\u4e2d\uff0c\u6211\u4eec\u8981\u4e3a\u8f66\u8f86\u7559\u51fa\u8db3\u591f\u7684\u53cd\u5e94\u65f6\u95f4\u3002\u6bd4\u5982 A \u8f66\u751f\u6210\u65f6\uff0c\u524d\u65b9 3 \u7c73\u5904\u6709\u4e00\u8f86 B \u8f66\u5728\u884c\u9a76\uff0c\u5373\u4f7f\u8fd9\u4e2a\u65f6\u523b\u4e24\u8f66\u4e0d\u76f8\u649e\uff0c\u672a\u6765\u51e0\u79d2\u5185\u4e24\u8f66\u8fd8\u662f\u6709\u5f88\u5927\u7684\u53ef\u80fd\u6027\u51b2\u7a81\u3002\u56e0\u6b64\uff0cLimSim \u4f1a\u4f7f\u7528\u8f66\u8f86\u672a\u6765\u7684\u8f68\u8ff9\uff08<code>dbTrajectory</code> \u6216 <code>plannedTrajectory</code>\uff09\u6765\u8fdb\u884c\u78b0\u649e\u68c0\u6d4b\uff0c\u4ee5\u907f\u514d\u6f5c\u5728\u7684\u51b2\u7a81\u3002</p>"},{"location":"GettingStarted/replayAndIreplay/#_5","title":"\u4eff\u771f\u793a\u4f8b","text":"<p>\u4ecb\u7ecd\u4e86\u5b9e\u73b0\u65b9\u6cd5\u4e4b\u540e\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u6307\u4ee4\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ea4\u4e92\u5f0f\u4eff\u771f\u7684\u793a\u4f8b\uff1a</p> <pre><code>python InterReplayExample.py\n</code></pre> <p>\u5982\u679c\u4e0a\u8ff0\u6307\u4ee4\u8fd0\u884c\u6b63\u5e38\uff0c\u5219\u540c\u6837\u4f1a\u8c03\u51fa\u56fe\u5f62\u754c\u9762\u3002\u56fe\u5f62\u754c\u9762\u7684\u6574\u4f53\u7ed3\u6784\u4e0e\u5b9e\u65f6\u4eff\u771f\u4e00\u81f4\uff0c\u4ec5\u5728 B \u533a\u6709\u4e9b\u8bb8\u4e0d\u540c\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8f66\u8f86\u524d\u9762\u7684\u66f2\u7ebf\u6709\u7c89\u7ea2\u8272\u548c\u7d2b\u8272\u4e24\u79cd\uff0c\u5206\u522b\u5bf9\u5e94\u524d\u6587\u63d0\u53ca\u7684 <code>dbTrajectory</code> \u548c <code>plannedTrajectory</code>\u3002\u8f66\u8f86\u5982\u679c\u6309\u7167\u6570\u636e\u5e93\u4e2d\u7684\u8f68\u8ff9\u884c\u9a76\uff0c\u5219\u663e\u793a <code>dbTrajectory</code>\uff0c\u5982\u679c\u53d7\u5230\u51b3\u7b56\u89c4\u5212\u7b97\u6cd5\u7684\u63a7\u5236\uff0c\u5219\u663e\u793a <code>plannedTrajectory</code>\u3002</p> <p></p> <p>\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>from trafficManager.traffic_manager import TrafficManager\nfrom simModel.egoTracking import interReplay\nirmodel = interReplay.InterReplayModel(\ndataBase='egoTrackingTest.db', \nstartFrame=4000\n)\nplanner = TrafficManager(irmodel)\nwhile not irmodel.tpEnd:\nirmodel.moveStep()\nif irmodel.timeStep % 5 == 0:\nroadgraph, vehicles = irmodel.exportSce()\nif roadgraph:\ntrajectories = planner.plan(\nirmodel.timeStep * 0.1, \nroadgraph, vehicles\n)\nelse:\ntrajectories = {} # (1)\nirmodel.setTrajectories(trajectories)\nelse:\nirmodel.setTrajectories({})\nirmodel.gui.destroy()\n</code></pre> <ol> <li>  \u8fd0\u884c\u4ea4\u4e92\u5f0f\u56de\u653e\u65f6\uff0c<code>irmodel.setTrajectories()</code> \u51fd\u6570\u662f\u5fc5\u987b\u7684\uff0c\u5373\u4f7f\u6ca1\u6709\u89c4\u5212\u8f68\u8ff9\uff0c\u4e5f\u9700\u8981\u4f20\u5165\u7a7a\u7684\u5b57\u5178\u3002</li> </ol> <p>\u793a\u4f8b\u4ee3\u7801\u6574\u4f53\u4e0e\u5b9e\u65f6\u4eff\u771f\u5dee\u522b\u4e0d\u5927\uff0c\u5c06\u8def\u7f51\u6587\u4ef6\u548c\u8def\u5f84\u6587\u4ef6\u66ff\u6362\u4e3a\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u5373\u53ef\u3002</p>"}]}